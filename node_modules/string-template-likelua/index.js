/**
 * Created by Fonov Sergei on 26.11.16.
 */

Math.round = function(num, limit) {
    if (limit == undefined)
        limit = 0;

    var mul = Math.pow(10, limit);
    return Math.floor(num * mul + 0.5) / mul;
}

String.prototype.format = function() {
    let str = this;
    let i = 0;
    let args = arguments;

    return str.replace(/%(?:\.([0-9]+))?(.)/g, function(str, precisionGroup, genericGroup) {
        if (precisionGroup != undefined && genericGroup != 'f')
            throw new Error("Precision can only be specified for 'f'");

        switch (genericGroup) {
            case '%':
                return '%';
                break;
            case 's':
                return args[i++].toString();
                break;
            case 'd':
                return parseInt(args[i++]);
                break;
            case 'f':
                if (precisionGroup == undefined)
                    return parseFloat(args[i++]);
                else
                    return Math.round(parseFloat(args[i++]), parseInt(precisionGroup));
                break;
            default:
                throw new Error('Unsupported conversion character %' + genericGroup);
        }

        return "";
    });
}